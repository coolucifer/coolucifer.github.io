{"version":3,"sources":["webpack:///./src/assets/images/blog-use/17-12-06-page-frame.png","webpack:///src/pages/BlogPages/2017-12-06.vue","webpack:///./src/pages/BlogPages/2017-12-06.vue?f904","webpack:///./src/pages/BlogPages/2017-12-06.vue"],"names":["module","exports","__webpack_require__","p","_017_12_06","Img","_7_12_06_page_frame_default","a","name","highlightCode","isIndex","sidebarlists","BlogPages_2017_12_06","render","_h","this","$createElement","_c","_self","staticClass","attrs","id","to","_v","aria-hidden","datetime","_m","src","alt","staticRenderFns","href","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.34659b58f968e9acfcb7.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/17-12-06-page-frame.9c16ecb.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/blog-use/17-12-06-page-frame.png\n// module id = DTTZ\n// module chunks = 1 4","<template>\r\n <div id=\"blog\" class=\"shadowbox\">\r\n  <ul class=\"pager\">\r\n    <li class=\"previous\">\r\n        <router-link to=\"/2017-11-29\">上一篇\r\n          <span aria-hidden=\"true\">&larr;</span>\r\n        </router-link>\r\n      </li>\r\n      <li class=\"next\">\r\n        <router-link to=\"/2017-12-12\">下一篇\r\n          <span aria-hidden=\"true\">&rarr;</span>\r\n        </router-link>\r\n      </li>\r\n  </ul>\r\n  <h1>Vue.js实战: 清单应用</h1>\r\n    <time datetime=\"2017-12-06\">2017-12-06</time>\r\n    <div class=\"blog-content\">\r\n      <p>今天我们来做一个Vue.js的清单应用,作为学习Vue.js的一个小练习,这里是<a href=\"https://coolucifer.github.io/vue-list/index.html\">成品地址</a>.</p>\r\n      <h3 id=\"chapt1\">一.确定页面的基础结构及数据存储</h3>\r\n      <p>做一个应用首先要确定页面的基础结构和样式,确定好各部件的上下级关系,比如标题,输入框,以及待办事项,已完成事项的位置.这里先用html建立一个大致的框架.</p>\r\n      <img class=\"img-responsive center-block\" :src=\"Img\" alt=\"页面框架\">\r\n      \r\n    <h3 id=\"chapt2\">二.任务的添加,删除与更新</h3>\r\n    <p>清单应用的主要功能,就是任务的添加,删除与更新(传说中的增删改<del>没有查</del>).</p>\r\n    <p>这是一个基于Vue.js的应用,当然要新建一个vue组件.组件中包含了<code>data:{}</code>用来存放数据,和<code>methods:{}</code>用来设置方法.</p>\r\n    <p>这里的数据分为两种类型: 输入框中正在输入的数据以及任务列表中的数据.正在输入的数据存储在data中的对象<code>current:{}</code>里,任务列表存放在数组<code>list:[]</code>里.</p>\r\n    <p>方法存放在<code>methods:{}</code>中,主要的功能有添加<code>add()</code>,删除<code>remove()</code>和更新<code>update()</code>.</p>\r\n    <p>通常来说,我们会在用户在输入框中输入回车<kbd>Enter</kbd>或者点击提交按钮的时候调用添加<code>add()</code>,因此可以在form中绑定事件<code>@submit.prevent=\"add\"</code>,在表单提交的时候add()就可以将表单内容添加到数组list[]中.</p>\r\n<pre>\r\n methods: {\r\n  add: function () {\r\n    var title = this.current.title;\r\n    if(!title && title !== 0) return;  //验证输入框内容是否为空\r\n\r\n    var todo = Object.assign({},this.current);  //将数组合并\r\n    this.list.push(todo)\r\n  }\r\n }\r\n</pre>\r\n    <p>对条目进行修改,更新时我们可以调用update()方法,然而实际上更新和添加的实现过程大部分是一样的,因此可以将两个方法结合成一个<code>merge()</code>.</p>\r\n    <p>为了确认在submit的时候是进行添加还是进行更新,我们可以给merge()传入一个独特的任务id,当传入任务id的时候为更新,无参数的时候为添加.当确认进行更新时,我们首先要找到即将更新的那项任务</p>\r\n<pre>\r\n var is_update = this.current.id;\r\n if (is_update) {    //如果是添加\r\n  //.find()返回满足条件的第一个元素,这里是\"item.id==is_update\"\r\n  var index = this.find_index_by_id(id);\r\n  //vue中修改数组的方式\r\n  Vue.set(this.list,index,Object.assign({},this.current));\r\n }else{    //否则\r\n  ...\r\n },\r\n\r\n find_index_by_id: function (id) {\r\n  return this.list.findIndex(function (item) {  //返回符合要求的项的index\r\n    return item.id == id;\r\n  })\r\n },\r\n</pre>\r\n    <p>如果想删除数据,可以在用户点击按钮的时候调用<code>remove(todo.id)</code>,可以通过对数组进行.splice()来删除.</p>\r\n<pre>\r\n remove: function (id) {\r\n  var index = this.find_index_by_id(id);\r\n  //splice() 方法向/从数组中添加/删除项目，然后返回被删除的项目\r\n  //该方法会改变原始数组\r\n  this.list.splice(index,1);\r\n },\r\n</pre>\r\n    <h3 id=\"chapt3\">三.localStorage与对接</h3>\r\n    <p>在设定好基础功能之后,下一个问题就是是数据的存储与交互.正常来说存储数据是需要数据库的支持的,由于这是纯前端项目不会涉及到数据库,我们可以使用前端的一种存储数据的方式<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\">localStorage</a>来存放数据.</p>\r\n    <p>localStorage主要是两个方法: <code>setItem()</code>和<code>getItem()</code>,分别用来创建和取值.它和sessionStorage的区别在于sessionStorage在关闭页面之后数据就会清空,而localStorage的数据不会在关闭页面之后清空.</p>\r\n    <blockquote>\r\n      <p>localStorage.setItem('myCat','Tom');&nbsp;&nbsp;//添加数据</p>\r\n      <p>localStorage.getItem(\"myCat\");&nbsp;&nbsp;//读取数据</p>\r\n      <p>localStorage.removeItem(\"myCat\");&nbsp;&nbsp;//删除数据</p>\r\n    </blockquote>\r\n    <p>我们可以将localStorage封装到我们自己的js文件中,使其在项目中更方便的使用.</p>\r\n<pre>\r\n function () {\r\n window.ms = {  //将方法暴露出去\r\n  set: set,\r\n  get: get,\r\n };\r\n\r\n function set(key,val) {  //set()\r\n  localStorage.setItem(key,JSON.stringify(val));\r\n };\r\n\r\n function get(key) {  //get()\r\n  var json = localStorage.getItem(key);\r\n  if (json) {\r\n    return JSON.parse(json);\r\n  }\r\n }\r\n }</pre>\r\n    <p>这样在其他文件里调用方法的时候可以直接使用<code>var task = ms.get('task');</code>来获取数据了.</p>\r\n    <p>接着是与localStorage的对接.在挂载时(<code>mounted:</code>)我们要使用get()方法取出localStorage中的数据,并且在list[]有变动时,我们都要使用set()方法将它保存到localStorage里,我们可以通过Vue的侦听器(<code>watch:</code>)来监测list[]是否有变化.</p>\r\n<pre>\r\n mounted: function () {\r\n  this.list = ms.get('list') || this.list;\r\n },\r\n\r\n watch: {\r\n  //每次list发生变化的时候自动执行handler\r\n  list: {\r\n    deep: true, //无论list嵌套得有多深\r\n    handler: function (new_val,old_val) {\r\n      if (new_val) {\r\n        ms.set('list',new_val);\r\n      } else {\r\n        ms.set('list',[]);\r\n      }\r\n     }\r\n  }\r\n }\r\n</pre>\r\n      <h3 id=\"chapt4\">四.组件化与EventBus</h3>\r\n      <p>我们可以考虑将任务列表组件化,在本例中我们将未完成任务列表转化为一个Vue组件:</p>\r\n<pre>\r\n Vue.component('task',{\r\n  template: '#task-tpl',\r\n  props: ['todo'],\r\n  methods: {\r\n    action: function (name,params) {\r\n      //https://cn.vuejs.org/v2/api/#vm-on 事件触发\r\n      //this.$emit(\"自定义事件名\",要传送的数据)\r\n      //v-on:自定义事件名=\"在methods中的函数名\"\r\n      Event.$emit(name,params);\r\n    }\r\n  }\r\n })\r\n</pre>\r\n      <p>这里我们使用了Event作为一个事件的调度中心:<code>var Event = new Vue();</code>,用来进行子组件与父组件之间的通信.这时我们要在子组件里触发一个事件<code>Event.$emit(name,params);</code>,从而可以在父级组件中监控事件.</p>\r\n<pre>\r\n mounted: function () {\r\n   var me = this;\r\n   Event.$on('remove',function (id) {\r\n     if(id){\r\n       me.remove(id);\r\n     }\r\n   })\r\n }\r\n</pre>\r\n      <p>同时在组件中的按钮绑定的点击事件也要改为<code>@click=\"action('remove',todo.id)\"</code></p>\r\n    </div>\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport hljs from 'highlight.js'\r\nimport Bus from '@/Bus.js'\r\nimport Img from '@/assets/images/blog-use/17-12-06-page-frame.png'\r\n\r\nexport default {\r\n  name: 'DecSixth',\r\n\r\n  data () {\r\n    return {\r\n      Img,\r\n      isIndex: false,\r\n      sidebarlists: [\r\n        {name: '页面结构及数据存储',\r\n          link: '#chapt1',\r\n          src: './static/img/attach.png'\r\n        },\r\n        {name: '任务的添加,删除与更新',\r\n          link: '#chapt2',\r\n          src: './static/img/attach.png'\r\n        },\r\n        {name: '与localStorage对接',\r\n          link: '#chapt3',\r\n          src: './static/img/attach.png'\r\n        },\r\n        {name: '组件化与EventBus',\r\n          link: '#chapt4',\r\n          src: './static/img/attach.png'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  components: {\r\n\r\n  },\r\n  mounted () {\r\n    hljs.highlightCode()\r\n    Bus.bus.$emit('isIndex', this.isIndex)\r\n    Bus.bus.$emit('sidebarlists', this.sidebarlists)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/BlogPages/2017-12-06.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shadowbox\",attrs:{\"id\":\"blog\"}},[_c('ul',{staticClass:\"pager\"},[_c('li',{staticClass:\"previous\"},[_c('router-link',{attrs:{\"to\":\"/2017-11-29\"}},[_vm._v(\"上一篇\\n          \"),_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"←\")])])],1),_vm._v(\" \"),_c('li',{staticClass:\"next\"},[_c('router-link',{attrs:{\"to\":\"/2017-12-12\"}},[_vm._v(\"下一篇\\n          \"),_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"→\")])])],1)]),_vm._v(\" \"),_c('h1',[_vm._v(\"Vue.js实战: 清单应用\")]),_vm._v(\" \"),_c('time',{attrs:{\"datetime\":\"2017-12-06\"}},[_vm._v(\"2017-12-06\")]),_vm._v(\" \"),_c('div',{staticClass:\"blog-content\"},[_vm._m(0),_vm._v(\" \"),_c('h3',{attrs:{\"id\":\"chapt1\"}},[_vm._v(\"一.确定页面的基础结构及数据存储\")]),_vm._v(\" \"),_c('p',[_vm._v(\"做一个应用首先要确定页面的基础结构和样式,确定好各部件的上下级关系,比如标题,输入框,以及待办事项,已完成事项的位置.这里先用html建立一个大致的框架.\")]),_vm._v(\" \"),_c('img',{staticClass:\"img-responsive center-block\",attrs:{\"src\":_vm.Img,\"alt\":\"页面框架\"}}),_vm._v(\" \"),_c('h3',{attrs:{\"id\":\"chapt2\"}},[_vm._v(\"二.任务的添加,删除与更新\")]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_vm._m(4),_vm._v(\" \"),_vm._m(5),_vm._v(\" \"),_c('pre',[_vm._v(\" methods: {\\n  add: function () {\\n    var title = this.current.title;\\n    if(!title && title !== 0) return;  //验证输入框内容是否为空\\n\\n    var todo = Object.assign({},this.current);  //将数组合并\\n    this.list.push(todo)\\n  }\\n }\\n\")]),_vm._v(\" \"),_vm._m(6),_vm._v(\" \"),_c('p',[_vm._v(\"为了确认在submit的时候是进行添加还是进行更新,我们可以给merge()传入一个独特的任务id,当传入任务id的时候为更新,无参数的时候为添加.当确认进行更新时,我们首先要找到即将更新的那项任务\")]),_vm._v(\" \"),_c('pre',[_vm._v(\" var is_update = this.current.id;\\n if (is_update) {    //如果是添加\\n  //.find()返回满足条件的第一个元素,这里是\\\"item.id==is_update\\\"\\n  var index = this.find_index_by_id(id);\\n  //vue中修改数组的方式\\n  Vue.set(this.list,index,Object.assign({},this.current));\\n }else{    //否则\\n  ...\\n },\\n\\n find_index_by_id: function (id) {\\n  return this.list.findIndex(function (item) {  //返回符合要求的项的index\\n    return item.id == id;\\n  })\\n },\\n\")]),_vm._v(\" \"),_vm._m(7),_vm._v(\" \"),_c('pre',[_vm._v(\" remove: function (id) {\\n  var index = this.find_index_by_id(id);\\n  //splice() 方法向/从数组中添加/删除项目，然后返回被删除的项目\\n  //该方法会改变原始数组\\n  this.list.splice(index,1);\\n },\\n\")]),_vm._v(\" \"),_c('h3',{attrs:{\"id\":\"chapt3\"}},[_vm._v(\"三.localStorage与对接\")]),_vm._v(\" \"),_vm._m(8),_vm._v(\" \"),_vm._m(9),_vm._v(\" \"),_vm._m(10),_vm._v(\" \"),_c('p',[_vm._v(\"我们可以将localStorage封装到我们自己的js文件中,使其在项目中更方便的使用.\")]),_vm._v(\" \"),_c('pre',[_vm._v(\" function () {\\n window.ms = {  //将方法暴露出去\\n  set: set,\\n  get: get,\\n };\\n\\n function set(key,val) {  //set()\\n  localStorage.setItem(key,JSON.stringify(val));\\n };\\n\\n function get(key) {  //get()\\n  var json = localStorage.getItem(key);\\n  if (json) {\\n    return JSON.parse(json);\\n  }\\n }\\n }\")]),_vm._v(\" \"),_vm._m(11),_vm._v(\" \"),_vm._m(12),_vm._v(\" \"),_c('pre',[_vm._v(\" mounted: function () {\\n  this.list = ms.get('list') || this.list;\\n },\\n\\n watch: {\\n  //每次list发生变化的时候自动执行handler\\n  list: {\\n    deep: true, //无论list嵌套得有多深\\n    handler: function (new_val,old_val) {\\n      if (new_val) {\\n        ms.set('list',new_val);\\n      } else {\\n        ms.set('list',[]);\\n      }\\n     }\\n  }\\n }\\n\")]),_vm._v(\" \"),_c('h3',{attrs:{\"id\":\"chapt4\"}},[_vm._v(\"四.组件化与EventBus\")]),_vm._v(\" \"),_c('p',[_vm._v(\"我们可以考虑将任务列表组件化,在本例中我们将未完成任务列表转化为一个Vue组件:\")]),_vm._v(\" \"),_c('pre',[_vm._v(\" Vue.component('task',{\\n  template: '#task-tpl',\\n  props: ['todo'],\\n  methods: {\\n    action: function (name,params) {\\n      //https://cn.vuejs.org/v2/api/#vm-on 事件触发\\n      //this.$emit(\\\"自定义事件名\\\",要传送的数据)\\n      //v-on:自定义事件名=\\\"在methods中的函数名\\\"\\n      Event.$emit(name,params);\\n    }\\n  }\\n })\\n\")]),_vm._v(\" \"),_vm._m(13),_vm._v(\" \"),_c('pre',[_vm._v(\" mounted: function () {\\n   var me = this;\\n   Event.$on('remove',function (id) {\\n     if(id){\\n       me.remove(id);\\n     }\\n   })\\n }\\n\")]),_vm._v(\" \"),_vm._m(14)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"今天我们来做一个Vue.js的清单应用,作为学习Vue.js的一个小练习,这里是\"),_c('a',{attrs:{\"href\":\"https://coolucifer.github.io/vue-list/index.html\"}},[_vm._v(\"成品地址\")]),_vm._v(\".\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"清单应用的主要功能,就是任务的添加,删除与更新(传说中的增删改\"),_c('del',[_vm._v(\"没有查\")]),_vm._v(\").\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"这是一个基于Vue.js的应用,当然要新建一个vue组件.组件中包含了\"),_c('code',[_vm._v(\"data:{}\")]),_vm._v(\"用来存放数据,和\"),_c('code',[_vm._v(\"methods:{}\")]),_vm._v(\"用来设置方法.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"这里的数据分为两种类型: 输入框中正在输入的数据以及任务列表中的数据.正在输入的数据存储在data中的对象\"),_c('code',[_vm._v(\"current:{}\")]),_vm._v(\"里,任务列表存放在数组\"),_c('code',[_vm._v(\"list:[]\")]),_vm._v(\"里.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"方法存放在\"),_c('code',[_vm._v(\"methods:{}\")]),_vm._v(\"中,主要的功能有添加\"),_c('code',[_vm._v(\"add()\")]),_vm._v(\",删除\"),_c('code',[_vm._v(\"remove()\")]),_vm._v(\"和更新\"),_c('code',[_vm._v(\"update()\")]),_vm._v(\".\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"通常来说,我们会在用户在输入框中输入回车\"),_c('kbd',[_vm._v(\"Enter\")]),_vm._v(\"或者点击提交按钮的时候调用添加\"),_c('code',[_vm._v(\"add()\")]),_vm._v(\",因此可以在form中绑定事件\"),_c('code',[_vm._v(\"@submit.prevent=\\\"add\\\"\")]),_vm._v(\",在表单提交的时候add()就可以将表单内容添加到数组list[]中.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"对条目进行修改,更新时我们可以调用update()方法,然而实际上更新和添加的实现过程大部分是一样的,因此可以将两个方法结合成一个\"),_c('code',[_vm._v(\"merge()\")]),_vm._v(\".\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"如果想删除数据,可以在用户点击按钮的时候调用\"),_c('code',[_vm._v(\"remove(todo.id)\")]),_vm._v(\",可以通过对数组进行.splice()来删除.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"在设定好基础功能之后,下一个问题就是是数据的存储与交互.正常来说存储数据是需要数据库的支持的,由于这是纯前端项目不会涉及到数据库,我们可以使用前端的一种存储数据的方式\"),_c('a',{attrs:{\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\"}},[_vm._v(\"localStorage\")]),_vm._v(\"来存放数据.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"localStorage主要是两个方法: \"),_c('code',[_vm._v(\"setItem()\")]),_vm._v(\"和\"),_c('code',[_vm._v(\"getItem()\")]),_vm._v(\",分别用来创建和取值.它和sessionStorage的区别在于sessionStorage在关闭页面之后数据就会清空,而localStorage的数据不会在关闭页面之后清空.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('blockquote',[_c('p',[_vm._v(\"localStorage.setItem('myCat','Tom');  //添加数据\")]),_vm._v(\" \"),_c('p',[_vm._v(\"localStorage.getItem(\\\"myCat\\\");  //读取数据\")]),_vm._v(\" \"),_c('p',[_vm._v(\"localStorage.removeItem(\\\"myCat\\\");  //删除数据\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"这样在其他文件里调用方法的时候可以直接使用\"),_c('code',[_vm._v(\"var task = ms.get('task');\")]),_vm._v(\"来获取数据了.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"接着是与localStorage的对接.在挂载时(\"),_c('code',[_vm._v(\"mounted:\")]),_vm._v(\")我们要使用get()方法取出localStorage中的数据,并且在list[]有变动时,我们都要使用set()方法将它保存到localStorage里,我们可以通过Vue的侦听器(\"),_c('code',[_vm._v(\"watch:\")]),_vm._v(\")来监测list[]是否有变化.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"这里我们使用了Event作为一个事件的调度中心:\"),_c('code',[_vm._v(\"var Event = new Vue();\")]),_vm._v(\",用来进行子组件与父组件之间的通信.这时我们要在子组件里触发一个事件\"),_c('code',[_vm._v(\"Event.$emit(name,params);\")]),_vm._v(\",从而可以在父级组件中监控事件.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"同时在组件中的按钮绑定的点击事件也要改为\"),_c('code',[_vm._v(\"@click=\\\"action('remove',todo.id)\\\"\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-153b2118\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/BlogPages/2017-12-06.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-153b2118\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./2017-12-06.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./2017-12-06.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./2017-12-06.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-153b2118\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./2017-12-06.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-153b2118\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/BlogPages/2017-12-06.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}